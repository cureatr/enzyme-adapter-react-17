{"version":3,"file":"detectFiberTags.js","names":["getFiber","element","container","global","document","createElement","inst","Tester","React","Component","ReactDOM","render","_reactInternals","child","getLazyFiber","LazyComponent","SuspenseWrapper","Suspense","fallback","module","exports","detectFiberTags","Fn","Cls","Ctx","createContext","FwdRef","forwardRef","props","ref","lazy","fakeDynamicImport","HostRoot","tag","ClassComponent","Fragment","FunctionalComponent","MemoSFC","memo","MemoClass","HostPortal","createPortal","HostComponent","HostText","Mode","StrictMode","ContextConsumer","Consumer","ContextProvider","Provider","value","ForwardRef","Profiler","id","onRender","Lazy","OffscreenComponent"],"sources":["../src/detectFiberTags.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { fakeDynamicImport } from '@wojtekmaj/enzyme-adapter-utils';\n\nfunction getFiber(element) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return element;\n    }\n  }\n  ReactDOM.render(React.createElement(Tester), container);\n  return inst._reactInternals.child;\n}\n\nfunction getLazyFiber(LazyComponent) {\n  const container = global.document.createElement('div');\n  let inst = null;\n\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return React.createElement(LazyComponent);\n    }\n  }\n\n  class SuspenseWrapper extends React.Component {\n    render() {\n      return React.createElement(React.Suspense, { fallback: false }, React.createElement(Tester));\n    }\n  }\n  ReactDOM.render(React.createElement(SuspenseWrapper), container);\n  return inst._reactInternals.child;\n}\n\nmodule.exports = function detectFiberTags() {\n  function Fn() {\n    return null;\n  }\n  class Cls extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  let Ctx = React.createContext();\n  // React will warn if we don't have both arguments.\n  // eslint-disable-next-line no-unused-vars\n  let FwdRef = React.forwardRef((props, ref) => null);\n  let LazyComponent = React.lazy(() => fakeDynamicImport(() => null));\n\n  return {\n    HostRoot: getFiber('test').return.return.tag, // Go two levels above to find the root\n    ClassComponent: getFiber(React.createElement(Cls)).tag,\n    Fragment: getFiber([['nested']]).tag,\n    FunctionalComponent: getFiber(React.createElement(Fn)).tag,\n    MemoSFC: getFiber(React.createElement(React.memo(Fn))).tag,\n    MemoClass: getFiber(React.createElement(React.memo(Cls))).tag,\n    HostPortal: getFiber(ReactDOM.createPortal(null, global.document.createElement('div'))).tag,\n    HostComponent: getFiber(React.createElement('span')).tag,\n    HostText: getFiber('text').tag,\n    Mode: getFiber(React.createElement(React.StrictMode)).tag,\n    ContextConsumer: getFiber(React.createElement(Ctx.Consumer, null, () => null)).tag,\n    ContextProvider: getFiber(React.createElement(Ctx.Provider, { value: null }, null)).tag,\n    ForwardRef: getFiber(React.createElement(FwdRef)).tag,\n    Profiler: getFiber(\n      React.createElement(React.Profiler, {\n        id: 'mock',\n        onRender() {},\n      }),\n    ).tag,\n    Suspense: getFiber(React.createElement(React.Suspense, { fallback: false })).tag,\n    Lazy: getLazyFiber(LazyComponent).tag,\n    OffscreenComponent: getLazyFiber('div').return.return.tag, // Go two levels above to find the root\n  };\n};\n"],"mappings":"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"}